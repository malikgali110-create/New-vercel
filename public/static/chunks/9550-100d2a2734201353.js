"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9550],{6815:function(e,t,s){s.d(t,{_:function(){return i}});var a=s(7437);s(2265);var n=s(6394),r=s(4508);function i(e){let{className:t,...s}=e;return(0,a.jsx)(n.f,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},3647:function(e,t,s){s.d(t,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return x},i4:function(){return u},ki:function(){return o}});var a=s(7437);s(2265);var n=s(702),r=s(875),i=s(401),l=s(2135),c=s(4508);function d(e){let{...t}=e;return(0,a.jsx)(n.fC,{"data-slot":"select",...t})}function o(e){let{...t}=e;return(0,a.jsx)(n.B4,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:i,...l}=e;return(0,a.jsxs)(n.xz,{"data-slot":"select-trigger","data-size":s,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(r.Z,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:r="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(h,{})]})})}function x(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(n.ck,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(i.Z,{className:"size-4"})})}),(0,a.jsx)(n.eT,{children:s})]})}function p(e){let{className:t,...s}=e;return(0,a.jsx)(n.u_,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(l.Z,{className:"size-4"})})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(n.$G,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(r.Z,{className:"size-4"})})}},3186:function(e,t,s){s.d(t,{V:function(){return w}});var a=s(7437),n=s(2265),r=s(2869),i=s(6070),l=s(5974),c=s(535),d=s(4508);let o=(0,c.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(o({variant:s}),t),...n})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}var x=s(1671),p=s(9388),h=s(8906),g=s(1817),f=s(1723),j=s(7404),v=s(3388),y=s(5409).lW;async function b(e){let t="mock-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));return{uuid:t,next:{always:"https://xumm.app/sign/".concat(t),no_push_msg_received:"https://xumm.app/sign/".concat(t,"?type=qr")},refs:{qr_png:"https://xumm.app/sign/".concat(t,".png"),qr_matrix:"https://xumm.app/sign/".concat(t),qr_uri_quality_opts:["m","q","h"],websocket_status:"wss://xumm.app/sign/".concat(t)}}}async function N(e){return{meta:{exists:!0,uuid:e,multisign:!1,submit:!0,destination:"rEMCStoreDestinationAddress123456789",resolved_destination:"rEMCStoreDestinationAddress123456789",signed:!0,cancelled:!1,expired:!1,pushed:!0,app_opened:!0,return_url_app:null,return_url_web:"".concat(window.location.origin,"/payment-success")},application:{name:"EMC Store",description:"Art Marketplace powered by Emotion Capsules",disabled:0,uuidv4:"emc-store-app-uuid",icon_url:"/favicon.ico",issued_user_token:null},payload:{tx_type:"PAYMENT",tx_destination:"rEMCStoreDestinationAddress123456789",tx_destination_tag:null,request_json:{},created_at:new Date().toISOString(),expires_at:new Date(Date.now()+3e5).toISOString(),expires_in_seconds:300},response:{hex:"mock_transaction_hex",txid:"mock_txid_".concat(Date.now()),resolved_at:new Date().toISOString(),dispatched_to:"XRPL_MAINNET",multisign_account:"",account:"rUserWalletAddress123456789"}}}function w(e){let{orderData:t,onPaymentSuccess:s,onPaymentError:c}=e,[d,o]=(0,n.useState)("idle"),[w,_]=(0,n.useState)(null),[M,S]=(0,n.useState)(""),[k,C]=(0,n.useState)(300),z=Math.round(1e4*t.totalUSD)/1e6,P="rEMCStoreDestinationAddress123456789";(0,n.useEffect)(()=>{let e;return"waiting"===d&&k>0?e=setInterval(()=>{C(e=>e-1)},1e3):0===k&&"waiting"===d&&(o("error"),S("Payment request expired. Please try again.")),()=>clearInterval(e)},[d,k]),(0,n.useEffect)(()=>{let e;return"waiting"===d&&(null==w?void 0:w.uuid)&&(e=setInterval(async()=>{try{var t;let a=await N(w.uuid);a.meta.signed&&(null===(t=a.response)||void 0===t?void 0:t.txid)?(o("success"),s(a.response.txid),clearInterval(e)):(a.meta.cancelled||a.meta.expired)&&(o("error"),S("Payment was cancelled or expired."),clearInterval(e))}catch(e){}},3e3)),()=>clearInterval(e)},[d,w,s]);let Z=async()=>{o("creating"),S("");try{let e=function(e,t,s){let a=y.from(JSON.stringify({orderId:s.orderId,store:"EMC Store",items:s.items.length})).toString("hex").toUpperCase();return{txjson:{TransactionType:"Payment",Destination:e,Amount:Math.round(1e6*t).toString(),Memos:[{Memo:{MemoData:a,MemoType:y.from("EMC_STORE_ORDER").toString("hex").toUpperCase()}}]},options:{submit:!0,expire:300,return_url:{web:"".concat(window.location.origin,"/payment-success")}}}}(P,z,t),s=await b(e);_(s),o("waiting"),C(300)}catch(e){o("error"),S("Failed to create payment request. Please try again."),c("Failed to create payment request")}};return"success"===d?(0,a.jsx)(i.Zb,{className:"border-green-200 bg-green-50",children:(0,a.jsx)(i.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(x.Z,{className:"h-16 w-16 text-green-600 mx-auto"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-green-800",children:"Payment Successful!"}),(0,a.jsx)("p",{className:"text-green-700",children:"Your XRPL payment has been confirmed and your order is being processed."})]})})}):"error"===d?(0,a.jsx)(i.Zb,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(i.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(p.Z,{className:"h-16 w-16 text-red-600 mx-auto"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-red-800",children:"Payment Failed"}),(0,a.jsx)("p",{className:"text-red-700",children:M}),(0,a.jsx)(r.z,{onClick:()=>o("idle"),variant:"outline",children:"Try Again"})]})})}):(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-primary"}),"XRPL Blockchain Payment"]})}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-primary/5 p-4 rounded-lg border border-primary/20",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Order Total (USD)"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",t.totalUSD.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Amount in XRP"}),(0,a.jsxs)("span",{className:"font-medium",children:[z.toFixed(6)," XRP"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Destination"}),(0,a.jsxs)("span",{className:"font-mono text-xs",children:[P.slice(0,10),"...",P.slice(-6)]})]})]})}),"idle"===d&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(u,{children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)(m,{children:"Secure payment powered by XRPL blockchain technology. Your transaction will be processed instantly and securely."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"How it works:"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-medium",children:"1"}),(0,a.jsx)("span",{children:'Click "Pay with XUMM" to create a payment request'})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-medium",children:"2"}),(0,a.jsx)("span",{children:"Open XUMM app on your phone or scan the QR code"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-medium",children:"3"}),(0,a.jsx)("span",{children:"Confirm the payment in your XUMM wallet"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-medium",children:"4"}),(0,a.jsx)("span",{children:"Your order will be confirmed automatically"})]})]})]}),(0,a.jsxs)(r.z,{onClick:Z,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Pay ",z.toFixed(6)," XRP with XUMM"]})]}),"creating"===d&&(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(g.Z,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Creating secure payment request..."})]}),"waiting"===d&&w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)(l.C,{variant:"outline",className:"mb-4",children:[(0,a.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"Expires in ","".concat(Math.floor(k/60),":").concat((k%60).toString().padStart(2,"0"))]}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Complete Payment in XUMM"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Open the XUMM app on your phone or scan the QR code below"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsx)(i.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)(j.Z,{className:"h-8 w-8 mx-auto text-muted-foreground"}),(0,a.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg",children:(0,a.jsx)("div",{className:"w-32 h-32 bg-white mx-auto rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"QR Code"})})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Scan with XUMM app"})]})}),(0,a.jsx)(i.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)(v.Z,{className:"h-8 w-8 mx-auto text-muted-foreground"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Open on Mobile"}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",className:"w-full bg-transparent",onClick:()=>window.open(w.next.always,"_blank"),children:"Open XUMM App"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tap to open XUMM directly"})]})})]}),(0,a.jsxs)(u,{children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(m,{children:"Waiting for payment confirmation... Do not close this page."})]})]})]})]})}}}]);